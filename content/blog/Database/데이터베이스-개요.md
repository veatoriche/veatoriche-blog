---
title: 데이터베이스 개요
date: 2021-01-11 19:01:74
category: Database
draft: false
---

## 데이터베이스란 무엇인가?

**사전적 의미**

*Database*란 통합되어 관리할 수 있는 데이터들의 집합이다. 이 데이터 집합들을 여러 목적으로 여러 사용자가 사용할 수 있다.

**현대적 의미**

논리적으로 관련이 있는 자료의 모음으로, 이 모음을 체계적으로 구성함으로서 검색과 갱신 등의 조작 효율을 목표하는 자료의 집합체

## 왜 사용하는가?
데이터베이스 존재 이전에는 파일 시스템을 이용해 데이터를 관리했다. 이 떄문에 나타난 문제점들은 다음과 같다

- 데이터 종속성
  - 응용 프로그램과 데이터간의 상호 의존 관계를 뜻한다
  - 데이터의 구성이 달라질 경우 응용 프로그램도 같이 변경해야 하는 문제점
- 데이터 중복성
  - 파일시스템으로 데이터를 관리할 경우, 부분적으로 같은 데이터임에도 사용하는 구조에 따라 여러 복사본을 만들어야함
  - 따라서 내용이 같으면서도 구조가 다른 데이터가 생겨나게 됨
  - 데이터의 중복성은 데이터의 일관성, 보안성, 경제성, 무결성 측면에서 다양한 문제를 야기시킨다.
    - 데이터 일관성
      - 중복 데이터가 존재할 경우 이 데이터들은 모두 같은 값이어야 하지만 동일성을 유지하기 어렵다.
    - 데이터 보안성
      - 한 시스템 내의 같은 내용의 데이터는 같은 수준의 접근 제한이 유지되어야 하지만 여러 저장 공간에 대해 이런 접근 제한 조치를 하는 것은 어렵다.
    - 데이터 경제성
      - 중복이 발생하면 저장 공간에 대한 비용이 더 들고 갱신, 검색 등의 작업 효율에 악영향을 미친다.
    - 데이터 무결성
      - 중복 저장되면 제어 분산으로 데이터의 정확성을 유지하기 어렵다.
      - 일관성 -> 모든 데이터들의 일치 여부
      - 무결성 -> 데이터가 올바른 값인지의 여부

위와 같은 문제점들을 해겨하기 위해 DBMS를 사용하는 것이다.

## Database의 특징

- 데이터의 독립성
  - 물리적 : 사이즈를 늘리거나 데이터파일을 추가하더라도 응용 프로그램을 수정할 필요가 없다.
  - 논리적 : 논리적 구조로 변경할 필요 없이 다양한 프로그램의 요구를 만족할 수 있다.
- 데이터의 중복 최소화 : 데이터를 통합, 관리하여 파일 시스템의 단점 중 하나인 중복성 해결
- 데이터의 일관성 : 논리적인 구조로 하나의 데이터만 변경했을 때 발생할 수 있는 불일치성 배제
- 데이터의 보안성 : 인가된 사용자만 데이터에 접근할 수 있도록 한다.
- 데이터의 무결성 : 여러 경로를 통해 잘못된 데이터 발생 가능성을 방지

## 데이터 베이스의 분류

현대에서 가장 많이 사용하는 데이터베이스에는 **관계형 데이터베이스(RDBMS)**와 **NoSQL**이 있다.

### RDBMS

흔히 표현하는 row, column으로 구성된 *관계형 모델*을 기반으로 하는 DBMS이다. RDBMS는 스키마를 정의하고 서로 연관이 있는 테이블을 생성하여 데이터를 저장하고 관리할 수 있게 해준다. 따라서 테이블간의 관계를 최적화시키며(정규화) 데이터의 중복성을 최소화하여  더 효율적인 트랜잭션을 수행할 수 있게 해준다.

RDBMS에서는 SQL이라는 언어를 사용한다. SQL은 데이터베이스에서 데이터를 정의, 조작, 제어하기 위해 사용하는 언어이다.

RDB는 범용적이고 안정적이기 떄문에 데이터의 일관성을 보장할 수 있고, 복잡한 형태의 SQL을 작성해 원하는 데이터를 추출할 수 있다. 그러나 테이블간의 관계를 맺는 과정이 복잡하고, 대량의 데이터를 입력하거나 조회하는 경우, 성능이 저하된다. 또한 이미 정의된 테이블의 관계를 변경할 경우 꽤 큰 패널티가 발생한다.

대표적인 RDBMS로는 MariaDB, PostgreSQL, MySQL 등이 있다.

### NoSQL

현대에는 테이블간의 관계로 정형화하여 저장할 수 없는 데이터로 볼 수 있는 것들이 생겨나기 시작하면서 RDBMS에 테이블의 형태로 저장하기 어려운 경우가 생겼다. 이런 경우를 대응하기 위해 생겨난 시스템이 *NoSQL*이다.

NoSQL에선 테이블간의 관계를 정의하지 않는다. 대신 key-value의 형태로 데이터를 관리하며 SQL 질의문을 사용하지 않는다. 이는 빠른 속도로 설계할 수 있게 도와주지만, 특정 데이터를 추출하는 데에는 어려울 수 있다. 

수직 확장이 필요한 RDBMS와는 다르게 NoSQL은 분산 컴퓨팅을 활용해 저렴한 비용으로 수평 확장하여 성능 향상을 도모할 수 있다.

대표적인 NoSQL로는 MongoDB, Cassandra, hbase 등이 있다.

## ACID, CAP

데이터베이스 트랜잭션이 안전하게 수행되는 것을 보장하기 위한 성질들을 가르키는 약어이다. 트랜잭션은 하나의 논리적 실행 단계인데, 이 트랜잭션이 목표했던대로 원활하게 동작하는 것을 보장하기 위해 가져야할 성질들을 말한다.

- Atomicity
  - 트랜잭션이 하나의 단위로 실행되어 도중에 중단되지 않는 것
- Consistency
  - 실행을 성공하면 언제나 일관성있는 데이터베이스 상태가 유지되는 것
- Isolation
  - 트랜잭션 수행 중 다른 연산이 끼어들지 못하게 하는 것
- Durability
  - 한번 수행된 트랜잭션은 영원히 반영되어야 한다.

ACID는 RDB에서는 굉장히 중요하게 생각하는 성질이지만, NoSQL에서는 잘 사용하지 않는 약어이다. 분산 시스템을 주로 활용하게 되는 NoSQL에서는 대신 CAP 이론을 따른다

- Consistency
  - 모든 요청은 최신 데이터나 에러를 응답받는다.
- Availability
  - 모든 요청은 정상 응답을 받는다
- Partitions Tolerance
  - DB간 통신이 실패해도 시스템 전체는 정상 동작해야 한다.

CAP 이론은 분산 시스템에서 위의 3가지 조건을 전부 만족할 수는 없으니 2가지를 선택하라는 이론이다. NoSQL과 분산 시스템을 많이 사용하기 떄문에 NoSQL 데이터베이스들의 특징을 말할 때엔 CAP 이론이 사용될 때가 많다.

CAP 이론에서 P의 경우에는 네트워크에 해당하는 말이며 절대로 네트워크 장애가 나지 않는 시스템은 없으므로 P는 무조건 선택되어야 하며, C, A중 하나를 선택해야만 한다는 모순도 있다. [참고](http://eincs.com/2013/07/misleading-and-truth-of-cap-theorem/)